(function(){"use strict";var e={3044:function(e,n,t){var i=t(5130),s=t(6768);function o(e,n,t,i,o,a){const l=(0,s.g2)("spending-page");return(0,s.uX)(),(0,s.Wv)(l)}var a=t(4232);const l={class:"column"},d=(0,s.Lk)("h2",null,"Додати витрати",-1),r=(0,s.Lk)("button",{class:"button",type:"submit"}," Додати ",-1),p={key:0,class:"column"},u=(0,s.Lk)("h2",null,"Список витрат",-1);function c(e,n,t,i,o,c){const x=(0,s.g2)("custom-input"),g=(0,s.g2)("spending-table"),E=(0,s.g2)("main-loader");return(0,s.uX)(),(0,s.CE)("div",{class:(0,a.C4)(["spending",{"single-column":!c.hasExpenses}])},[(0,s.Lk)("div",l,[(0,s.Lk)("form",{novalidate:"",onSubmit:n[0]||(n[0]=(...e)=>c.sendSpending&&c.sendSpending(...e))},[d,(0,s.bF)(x,{id:"foodExpense",label:"Їжа",value:o.foodExpense,error:o.errors.foodExpense,onChangeField:c.changeField},null,8,["value","error","onChangeField"]),(0,s.bF)(x,{id:"utilityExpense",label:"Комунальні витрати",value:o.utilityExpense,error:o.errors.utilityExpense,onChangeField:c.changeField},null,8,["value","error","onChangeField"]),(0,s.bF)(x,{id:"otherExpense",label:"Інші витрати",value:o.otherExpense,error:o.errors.otherExpense,onChangeField:c.changeField},null,8,["value","error","onChangeField"]),(0,s.bF)(x,{id:"dateExpensePersonal",label:"Дата",type:"date",value:o.dateExpensePersonal,error:o.errors.dateExpensePersonal,onChangeField:c.changeField},null,8,["value","error","onChangeField"]),r],32)]),c.hasExpenses?((0,s.uX)(),(0,s.CE)("div",p,[u,(0,s.bF)(g,{expenses:o.expenses,onUpdateExpense:c.updateExpense,onRemoveExpense:c.removeExpense},null,8,["expenses","onUpdateExpense","onRemoveExpense"])])):(0,s.Q3)("",!0),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[o.isLoading?((0,s.uX)(),(0,s.Wv)(E,{key:0})):(0,s.Q3)("",!0)]))],2)}var x=t(8355);const g=["for"],E=["type","value","disabled"],h={key:1,class:"error"};function v(e,n,t,i,o,l){return(0,s.uX)(),(0,s.CE)("div",{class:(0,a.C4)(["custom-input",{"has-error":t.error}])},[t.label?((0,s.uX)(),(0,s.CE)("label",{key:0,for:t.id},(0,a.v_)(t.label),9,g)):(0,s.Q3)("",!0),(0,s.Lk)("input",{id:"id",type:t.type,value:t.value,disabled:t.disabled,autocomplete:"off",onInput:n[0]||(n[0]=(...e)=>l.changeField&&l.changeField(...e)),onChange:n[1]||(n[1]=(...e)=>l.changeField&&l.changeField(...e))},null,40,E),t.error?((0,s.uX)(),(0,s.CE)("span",h,(0,a.v_)(t.error),1)):(0,s.Q3)("",!0)],2)}var f={name:"CustomInput",props:{id:{type:String,default:"",required:!0},label:{type:String,default:""},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},value:{type:String,default:""},error:{type:String,default:""}},methods:{changeField(e){const n=e.target.value;n!==this.value&&this.$emit("change-field",{fieldName:this.id,value:n})}}},m=t(1241);const y=(0,m.A)(f,[["render",v]]);var b=y;const k={class:"data-table"},L=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Їжа"),(0,s.Lk)("th",null,"Комунальні"),(0,s.Lk)("th",null,"Інші"),(0,s.Lk)("th",null,"Дата"),(0,s.Lk)("th")])],-1);function F(e,n,t,i,o,a){const l=(0,s.g2)("spending-table-item");return(0,s.uX)(),(0,s.CE)("table",k,[L,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.expenses,(e=>((0,s.uX)(),(0,s.Wv)(l,{key:e.id,expense:e,"is-editing":a.checkIsEditingExpense(e.id),onSetEditingExpenseId:a.setEditingExpenseId,onUpdateExpense:a.updateExpense,onRemoveExpense:a.removeExpense},null,8,["expense","is-editing","onSetEditingExpenseId","onUpdateExpense","onRemoveExpense"])))),128))])])}const C={class:"text"},S={class:"text"},P={class:"text"},$={class:"text"};function I(e,n,t,i,o,l){const d=(0,s.g2)("custom-input"),r=(0,s.g2)("action-buttons");return(0,s.uX)(),(0,s.CE)("tr",{class:(0,a.C4)(["spending-table-item",{"not-editable":!t.isEditing}])},[(0,s.Lk)("td",null,[(0,s.Lk)("span",C,(0,a.v_)(o.editingExpense.foodExpense),1),(0,s.bF)(d,{id:`${o.editingExpense.id}-${o.editingExpense.foodExpense}`,value:o.editingExpense.foodExpense,onChangeField:n[0]||(n[0]=({value:e})=>l.changeField("foodExpense",e))},null,8,["id","value"])]),(0,s.Lk)("td",null,[(0,s.Lk)("span",S,(0,a.v_)(o.editingExpense.utilityExpense),1),(0,s.bF)(d,{id:`${o.editingExpense.id}-${o.editingExpense.utilityExpense}`,value:o.editingExpense.utilityExpense,onChangeField:n[1]||(n[1]=({value:e})=>l.changeField("utilityExpense",e))},null,8,["id","value"])]),(0,s.Lk)("td",null,[(0,s.Lk)("span",P,(0,a.v_)(o.editingExpense.otherExpense),1),(0,s.bF)(d,{id:`${o.editingExpense.id}-${o.editingExpense.otherExpense}`,value:o.editingExpense.otherExpense,onChangeField:n[2]||(n[2]=({value:e})=>l.changeField("otherExpense",e))},null,8,["id","value"])]),(0,s.Lk)("td",null,[(0,s.Lk)("span",$,(0,a.v_)(o.editingExpense.dateExpensePersonal),1),(0,s.bF)(d,{id:`${o.editingExpense.id}-${o.editingExpense.dateExpensePersonal}`,value:o.editingExpense.dateExpensePersonal,type:"date",onChangeField:n[3]||(n[3]=({value:e})=>l.changeField("dateExpensePersonal",e))},null,8,["id","value"])]),(0,s.Lk)("td",null,[(0,s.bF)(r,{"is-editing":t.isEditing,onSetEditing:l.setEditingExpense,onCancelEditing:l.cancelEditingExpense,onRemove:l.removeExpense,onSave:l.updateExpense},null,8,["is-editing","onSetEditing","onCancelEditing","onRemove","onSave"])])],2)}const A={class:"action-buttons"},O={key:0};function X(e,n,t,i,o,a){return(0,s.uX)(),(0,s.CE)("ul",A,[t.isEditing?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("li",null,[(0,s.Lk)("button",{class:"fa fa-trash-o",onClick:n[1]||(n[1]=(...e)=>a.remove&&a.remove(...e))})]),(0,s.Lk)("li",null,[(0,s.Lk)("button",{class:"fa fa-times",onClick:n[2]||(n[2]=(...e)=>a.cancel&&a.cancel(...e))})]),(0,s.Lk)("li",null,[(0,s.Lk)("button",{class:"fa fa-check",onClick:n[3]||(n[3]=(...e)=>a.save&&a.save(...e))})])],64)):((0,s.uX)(),(0,s.CE)("li",O,[(0,s.Lk)("button",{class:"fa fa-pencil",onClick:n[0]||(n[0]=(...e)=>a.editing&&a.editing(...e))})]))])}var w={name:"ActionButtons",props:{isEditing:{type:Boolean,default:!1}},methods:{editing(){this.$emit("set-editing")},cancel(){this.$emit("cancel-editing")},remove(){this.$emit("remove")},save(){this.$emit("save")}}};const T=(0,m.A)(w,[["render",X]]);var _=T,j={name:"SpendingTableItem",components:{CustomInput:b,ActionButtons:_},props:{expense:{type:Object,default:()=>({})},isEditing:{type:Boolean,default:!1}},data(){return{editingExpense:{}}},created(){this.init()},watch:{isEditing(){this.init()}},methods:{init(){console.log("init: ",this.expense),this.editingExpense=JSON.parse(JSON.stringify(this.expense))},changeField(e,n){console.log("changeField fieldName, value: ",e,n),this.editingExpense[e]=n},setEditingExpense(){console.log("setEditingExpense this.editingExpense: ",this.editingExpense),this.$emit("set-editing-expense-id",this.expense.id)},cancelEditingExpense(){this.$emit("set-editing-expense-id","")},updateExpense(){this.$emit("update-expense",this.editingExpense)},removeExpense(){this.$emit("remove-expense",this.expense.id)}}};const R=(0,m.A)(j,[["render",I]]);var B=R,M={name:"SpendingTable",components:{SpendingTableItem:B},data(){return{editingExpenseId:null}},props:{expenses:{type:Array,default:()=>[]}},methods:{setEditingExpenseId(e){console.log("setIsEditingExpense: ",e),this.editingExpenseId=e},checkIsEditingExpense(e){return this.editingExpenseId===e},updateExpense(e){this.$emit("update-expense",e)},removeExpense(e){this.$emit("remove-expense",e)}}};const N=(0,m.A)(M,[["render",F]]);var Q=N;const U={class:"loader"};function W(e,n,t,i,o,a){return(0,s.uX)(),(0,s.CE)("div",U)}var D={name:"MainLoader"};const J=(0,m.A)(D,[["render",W]]);var K=J;const q=[{id:"1",foodExpense:"1",utilityExpense:"1",otherExpense:"1",dateExpensePersonal:"1"},{id:"2",foodExpense:"2",utilityExpense:"2",otherExpense:"2",dateExpensePersonal:"2"}];var z={name:"SpendingPage",components:{CustomInput:b,SpendingTable:Q,MainLoader:K},data(){return{foodExpense:"",utilityExpense:"",otherExpense:"",dateExpensePersonal:"",expenseType:{},expenses:[],editingExpenseId:"",errors:{},isLoading:!1}},dateRegex:/^\d{4}-\d{2}-\d{2}$/,computed:{hasExpenses(){return this.expenses&&this.expenses.length}},mounted(){this.getAllExpenses()},methods:{async updateExpense(e){console.log("updateExpense expense: ",e);try{this.isLoading=!0,await this.getAllExpenses()}finally{this.isLoading=!1}},async removeExpense(e){console.log("removeExpense id: ",e);try{this.isLoading=!0,console.log("Removed expense id: ",e),await this.getAllExpenses()}finally{this.isLoading=!1}},async getAllExpenses(){console.log("getAllExpenses",q);try{this.isLoading=!0,this.expenses=q,console.log("Список витрат успішно отриманий:",this.expenses)}catch(e){console.error("Помилка при отриманні списку витрат:",e)}finally{this.isLoading=!1}},changeField({fieldName:e,value:n}){this[e]=n},validateDate(){return this.errors.dateExpensePersonal="",this.dateExpensePersonal?!!this.$options.dateRegex.test(this.dateExpensePersonal)||(this.errors.dateExpensePersonal="Невірний формат дати",!1):(this.errors.dateExpensePersonal="Не вказана дата",!1)},async sendSpending(e){e.preventDefault();const n=this.validateDate();if(n)try{this.isLoading=!0,await x.A.post("/personal_expenses/api/expenses",{foodExpense:this.foodExpense,utilityExpense:this.utilityExpense,otherExpense:this.otherExpense,dateExpensePersonal:this.dateExpensePersonal,expenseType:this.expenseType.value}),await this.getAllExpenses()}catch(t){console.error("Помилка при додаванні витрати:",t)}finally{this.isLoading=!1}}}};const G=(0,m.A)(z,[["render",c]]);var H=G,V={name:"App",components:{SpendingPage:H}};const Y=(0,m.A)(V,[["render",o]]);var Z=Y;(0,i.Ef)(Z).mount("#app")}},n={};function t(i){var s=n[i];if(void 0!==s)return s.exports;var o=n[i]={exports:{}};return e[i].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(n,i,s,o){if(!i){var a=1/0;for(p=0;p<e.length;p++){i=e[p][0],s=e[p][1],o=e[p][2];for(var l=!0,d=0;d<i.length;d++)(!1&o||a>=o)&&Object.keys(t.O).every((function(e){return t.O[e](i[d])}))?i.splice(d--,1):(l=!1,o<a&&(a=o));if(l){e.splice(p--,1);var r=s();void 0!==r&&(n=r)}}return n}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[i,s,o]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,i){var s,o,a=i[0],l=i[1],d=i[2],r=0;if(a.some((function(n){return 0!==e[n]}))){for(s in l)t.o(l,s)&&(t.m[s]=l[s]);if(d)var p=d(t)}for(n&&n(i);r<a.length;r++)o=a[r],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(p)},i=self["webpackChunkaccounting"]=self["webpackChunkaccounting"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],(function(){return t(3044)}));i=t.O(i)})();
//# sourceMappingURL=app.62c48cce.js.map